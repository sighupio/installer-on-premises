# On Premises module release v1.33.4-rev.1

Welcome to the latest release of `on-premises` module of [`SIGHUP Distribution`](https://github.com/sighupio/distribution) maintained by SIGHUP by ReeVo team.

This release fixes PKI file permission issues introduced in v1.33.4 and improves CIS Kubernetes Benchmark compliance.

## Package Versions ðŸš¢

### v1.33.4-rev.1

| Package                                        | Supported Version | Previous Version |
| ---------------------------------------------- | ----------------- | ---------------- |
| [etcd](roles/etcd)                             | `3.5.21`          | `No update`      |
| [haproxy](roles/haproxy)                       | `3.0`             | `No update`      |
| [containerd](roles/containerd)                 | `1.7.28`          | `No update`      |
| [kube-node-common](roles/kube-node-common)     | `-`               | `No update`      |
| [kube-control-plane](roles/kube-control-plane) | `-`               | `No update`      |
| [kube-worker](roles/kube-worker)               | `-`               | `No update`      |

## Bug fixes ðŸž

- [[#148](https://github.com/sighupio/installer-on-premises/pull/148)]: Fixes incorrect recursive permission and ownership changes applied by the installer v1.33.4 when configuring etcd and control-plane PKI files. The installer was incorrectly applying recursive `chmod` and `chown` operations to directories like `/var/lib/etcd`, `/etc/etcd/pki/etcd`, and `/etc/kubernetes/pki`. This fix removes recursive operations and restricts permission changes to intended files only.

## CIS Kubernetes Benchmark improvements

- [[#149](https://github.com/sighupio/installer-on-premises/pull/149)]: Updates the customized kube-bench configuration (CIS-1.11 for Kubernetes 1.32) to reduce false positives by explicitly skipping non-actionable checks or those already mitigated by default cluster settings.

- [[#150](https://github.com/sighupio/installer-on-premises/pull/150)]: Adds maintenance documentation for CIS Kubernetes Benchmark compliance testing, including procedures for monitoring and updating configurations, and a changelog tracking all customized controls with clear justifications.

## Update Guide ðŸ¦®

In this guide, we will try to summarize the update process to this release.

### Automatic upgrade using furyctl

To update using furyctl, follow this [documentation](https://docs.sighup.io/docs/installation/upgrades).

### Manual update

> NOTE: Each on-premises environment can be different, always double-check before updating components.

1. Update SD if applicable (see the [SD release notes](https://github.com/sighupio/distribution/tree/master/docs/releases))
2. Update the cluster using playbooks, see the examples in this repository to know more.
