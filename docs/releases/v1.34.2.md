# On Premises module release v1.34.2

Welcome to the latest release of `on-premises` module of [`SIGHUP Distribution`](https://github.com/sighupio/distribution) maintained by SIGHUP by ReeVo team.

This release installs Kubernetes version 1.34.2 and adds support for Kubernetes v1.33.6, v1.32.10 .

## Package Versions ðŸš¢

### v1.34.2

| Package                                        | Supported Version | Previous Version |
| ---------------------------------------------- | ----------------- | ---------------- |
| [etcd](roles/etcd)                             | `3.5.24`          | `3.5.21`         |
| [haproxy](roles/haproxy)                       | `3.0`             | `No update`      |
| [containerd](roles/containerd)                 | `1.7.29`          | `1.7.28`         |
| [runc](roles/containerd)                       | `1.3.3`           | `1.3.0`          |
| [kube-node-common](roles/kube-node-common)     | `-`               | `Updated`        |
| [kube-control-plane](roles/kube-control-plane) | `-`               | `Updated`        |
| [kube-worker](roles/kube-worker)               | `-`               | `No update`      |

### v1.33.6

| Package                                        | Supported Version | Previous Version |
| ---------------------------------------------- | ----------------- | ---------------- |
| [etcd](roles/etcd)                             | `3.5.24`          | `3.5.21`         |
| [haproxy](roles/haproxy)                       | `3.0`             | `No update`      |
| [containerd](roles/containerd)                 | `1.7.28`          | `No update`      |
| [runc](roles/containerd)                       | `1.3.3`           | `1.3.0`          |
| [kube-node-common](roles/kube-node-common)     | `-`               | `Updated`        |
| [kube-control-plane](roles/kube-control-plane) | `-`               | `Updated`        |
| [kube-worker](roles/kube-worker)               | `-`               | `No update`      |


### v1.32.10

| Package                                        | Supported Version | Previous Version |
| ---------------------------------------------- | ----------------- | ---------------- |
| [etcd](roles/etcd)                             | `3.5.24`          | `3.5.21`         |
| [haproxy](roles/haproxy)                       | `3.0`             | `No update`      |
| [containerd](roles/containerd)                 | `1.7.26`          | `No update`      |
| [runc](roles/containerd)                       | `1.2.8`           | `1.2.5`          |
| [kube-node-common](roles/kube-node-common)     | `-`               | `Updated`        |
| [kube-control-plane](roles/kube-control-plane) | `-`               | `Updated`        |
| [kube-worker](roles/kube-worker)               | `-`               | `No update`      |

## Bug Fixes ðŸž

- [[#141](https://github.com/sighupio/installer-on-premises/pull/152)] **Do not hardcode etcd_binary_dir in etcd.service.j2**: Avoid hardcoding the etcd path inside the service in order to support setting a different download location.
- [[#155](https://github.com/sighupio/installer-on-premises/pull/155)] **Make kubelet config update idempotent on workers-nodes/control-plane roles**: Self-heal after interrupted runs and post-upgrade rewrites to keep `/var/lib/kubelet/config.yaml` in sync with the updated kubelet configurations.
- [[#157](https://github.com/sighupio/installer-on-premises/pull/157)] **Stop adding node as a unicast peer in keepalived**: the HAProxy role was adding the node itself as a unicast peer in keepalived's configuration, resulting in a `equal priority advert received from remote host with our IP address` warning in the logs. The node is not added anymore.

## Breaking Changes ðŸ’”

None.

## Update Guide ðŸ¦®

### Automatic upgrade using furyctl

To update using furyctl, follow this [documentation](https://docs.sighup.io/docs/installation/upgrades).

### Manual update
  
> NOTE: Each on-premises environment can be different, always double-check before updating components.

1. Update SD if applicable (see the [SD release notes](https://github.com/sighupio/distribution/tree/master/docs/releases))
2. Update the cluster using playbooks, see the examples in this repository to know more.
